angular.module("app.modules",[]),angular.module("app.controllers",[]),angular.module("app",["ngAnimate","ngResource","ui.router","ui.bootstrap","ui.tree","app.modules","app.controllers","app.demo.services","app.demo.directives","app.demo.controllers"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.when("","/dashboard").when("/","/dashboard").otherwise("/404"),a.state("code",{url:"/code",templateUrl:"views/code/page.html",controller:"CodeCtrl"}).state("patch",{url:"/patch",templateUrl:"views/patch/page.html",controller:"PatchCtrl"}).state("version-control",{url:"/version-control",templateUrl:"views/version-control/page.html",controller:"VersionControlCtrl"}).state("dashboard",{url:"/dashboard",templateUrl:"views/demo/dashboard.html",controller:"DashboardCtrl"}).state("ui_typography",{url:"/ui/typography",templateUrl:"views/demo/ui/typography.html"}).state("ui_buttons",{url:"/ui/buttons",templateUrl:"views/demo/ui/buttons.html"}).state("ui_icons",{url:"/ui/icons",templateUrl:"views/demo/ui/icons.html"}).state("ui_widgets",{url:"/ui/widgets",templateUrl:"views/demo/ui/widgets.html"}).state("ui_grids",{url:"/ui/grids",templateUrl:"views/demo/ui/grids.html"}).state("ui_components",{url:"/ui/components",templateUrl:"views/demo/ui/components.html"}).state("ui_timeline",{url:"/ui/timeline",templateUrl:"views/demo/ui/timeline.html"}).state("ui_nested_lists",{url:"/ui/nested-lists",templateUrl:"views/demo/ui/nested-lists.html"}).state("ui_pricing_tables",{url:"/ui/pricing-tables",templateUrl:"views/demo/ui/pricing-tables.html"}).state("forms_elements",{url:"/forms/elements",templateUrl:"views/demo/forms/elements.html"}).state("forms_layouts",{url:"/forms/layouts",templateUrl:"views/demo/forms/layouts.html"}).state("forms_validation",{url:"/forms/validation",templateUrl:"views/demo/forms/validation.html"}).state("forms_wizard",{url:"/forms/wizard",templateUrl:"views/demo/forms/wizard.html"}).state("pages_404",{url:"/404",templateUrl:"views/demo/pages/404.html"}).state("pages_500",{url:"/pages/500",templateUrl:"views/demo/pages/500.html"}).state("pages_about",{url:"/pages/about",templateUrl:"views/demo/pages/about.html"}).state("pages_blank",{url:"/pages/blank",templateUrl:"views/demo/pages/blank.html"}).state("pages_contact",{url:"/pages/contact",templateUrl:"views/demo/pages/contact.html"}).state("pages_forgot_password",{url:"/pages/forgot",templateUrl:"views/demo/pages/forgot-password.html"}).state("pages_invoice",{url:"/pages/invoice",templateUrl:"views/demo/pages/invoice.html"}).state("pages_lock_screen",{url:"/pages/lock-screen",templateUrl:"views/demo/pages/lock-screen.html"}).state("pages_profile",{url:"/pages/profile",templateUrl:"views/demo/pages/profile.html"}).state("pages_services",{url:"/pages/services",templateUrl:"views/demo/pages/services.html"}).state("pages_signin",{url:"/pages/signin",templateUrl:"views/demo/pages/signin.html"}).state("pages_signup",{url:"/pages/signup",templateUrl:"views/demo/pages/signup.html"}).state("tables_static",{url:"/tables/static",templateUrl:"views/demo/tables/static.html"}).state("tables_dynamic",{url:"/tables/dynamic",templateUrl:"views/demo/tables/dynamic.html"}).state("tables_responsive",{url:"/tables/responsive",templateUrl:"views/demo/tables/responsive.html"})}]),angular.module("app.controllers",[]).controller("AppCtrl",["$rootScope","$scope","$location","$http","$window",function(a,b,c,d,e){b.isSpecificPage=function(){var a=c.path();return _.contains(["/404","/pages/500","/pages/login","/pages/signin","/pages/signin1","/pages/signin2","/pages/signup","/pages/signup1","/pages/signup2","/pages/forgot","/pages/lock-screen"],a)},b.main={brand:"MegaNet",name:"Hoalong"},b.commandMenu={templateUrl:"views/nav/empty.html"},b.ApplyCommandMenu=function(a){b.commandMenu=angular.copy(a)},b.SafeApply=function(){b.$$phase||b.$apply()},b.UploadFiles=function(a,b,c,e){if(!a||!b)return e("File(s) and(or) URL must be specified");var f=new FormData;if(Array.isArray(a))if(1==a.length)f.append("file",a[0]);else for(var g=0;g<a.length;g++)f.append("file[]",a[g]);else f.append("file",a[0]);d.post(b,f,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(c).error(e)},ToReadableData=function(a){if(!a)return"";var b=[" bytes"," KB"," MB"," GB"," TB"," PB"," EB"," ZB"," YB"],c=Math.floor(Math.log(a)/Math.log(2));1>c&&(c=0);var d=Math.floor(c/10);return a/=Math.pow(2,10*d),a.toString().length>a.toFixed(3).toString().length&&(a=a.toFixed(3)),a+b[d]},ToReadableTime=function(a){if(!a)return"";var b={};b.D=moment.duration(a,"seconds").days(),b.H=moment.duration(a,"seconds").hours(),b.m=moment.duration(a,"seconds").minutes();var c="";return _.forEach(b,function(a,b){a>0&&(c+=" "+a+b.toString())}),c},ToReadbleDate=function(a){return moment(a).format("DD/MM/YYYY HH:mm:ss")},e.onresize=function(){a.$broadcast("window-resize")}}]).controller("DashboardCtrl",["$scope",function(a){a.ApplyCommandMenu({templateUrl:"views/nav/empty.html"})}]),angular.module("app.modules").factory("localize",["$http","$rootScope","$window",function(a,b,c){var d={language:"",url:void 0,resourceFileLoaded:!1,successCallback:function(a){d.dictionary=a,d.resourceFileLoaded=!0,b.$broadcast("localizeResourcesUpdated")},setLanguage:function(a){d.language=a.toLowerCase().split("-")[0],d.initLocalizedResources()},setUrl:function(a){d.url=a,d.initLocalizedResources()},buildUrl:function(){return d.language||(d.language=(c.navigator.userLanguage||c.navigator.language).toLowerCase(),d.language=d.language.split("-")[0]),"i18n/resources-locale_"+d.language+".js"},initLocalizedResources:function(){var c=d.url||d.buildUrl();a({method:"GET",url:c,cache:!1}).success(d.successCallback).error(function(){b.$broadcast("localizeResourcesUpdated")})},getLocalizedString:function(a){var b,c;return d.dictionary&&a?(c=a.toLowerCase(),b=""===d.dictionary[c]?a:d.dictionary[c]):b=a,b}};return d}]).directive("i18n",["localize",function(a){var b;return b={restrict:"EA",updateText:function(b,c,d){var e;"i18n-placeholder"===c?(e=a.getLocalizedString(d),b.attr("placeholder",e)):c.length>=1&&(e=a.getLocalizedString(c),b.text(e))},link:function(a,c,d){a.$on("localizeResourcesUpdated",function(){b.updateText(c,d.i18n,d.placeholder)}),d.$observe("i18n",function(a){b.updateText(c,a,d.placeholder)})}}}]).controller("LangCtrl",["$scope","localize",function(a,b){a.lang="English",a.setLang=function(c){switch(c){case"English":b.setLanguage("EN-US");break;case"Español":b.setLanguage("ES-ES");break;case"日本語":b.setLanguage("JA-JP");break;case"中文":b.setLanguage("ZH-TW");break;case"Deutsch":b.setLanguage("DE-DE");break;case"français":b.setLanguage("FR-FR");break;case"Italiano":b.setLanguage("IT-IT");break;case"Portugal":b.setLanguage("PT-BR");break;case"Русский язык":b.setLanguage("RU-RU");break;case"한국어":b.setLanguage("KO-KR")}a.lang=c},a.getFlag=function(){var b=a.lang;switch(b){case"English":return"flags-american";case"Español":return"flags-spain";case"日本語":return"flags-japan";case"中文":return"flags-china";case"Deutsch":return"flags-germany";case"français":return"flags-france";case"Italiano":return"flags-italy";case"Portugal":return"flags-portugal";case"Русский язык":return"flags-russia";case"한국어":return"flags-korea"}}}]),angular.module("app.modules").directive("slimScroll",[function(){return{restrict:"A",link:function(a,b,c){return b.slimScroll({height:c.scrollHeight||"100%"})}}}]).controller("ModalCtrl",["$scope","$log","$modal",function(a,b,c){a.ShowFormCode=function(a){var d=c.open({templateUrl:"views/code/form.html",controller:"CodeFormCtrl",backdrop:!1,resolve:{data:function(){return{code:a,options:{title:(a?"Edit":"Create")+" Code version"}}}}});d.result.then(function(a){b.info(a)},function(){b.info("Modal dismissed at: "+new Date)})}}]),angular.module("app.modules").directive("toggleMinNav",["$rootScope",function(a){return{restrict:"A",link:function(b,c){var d,e,f;e=$("#app"),d=$(window),c.on("click",function(b){e.hasClass("nav-min")?e.removeClass("nav-min"):e.addClass("nav-min"),a.$broadcast("minNav:enabled"),b.preventDefault()}),f=function(){var a=d.width();768>a&&e.removeClass("nav-min")},d.resize(function(){var a;clearTimeout(a),a=setTimeout(f,300)})}}}]).directive("collapseNav",[function(){return{restrict:"A",link:function(a,b){var c,d,e,f,g;e=b.find("ul").parent("li"),e.append('<i class="fa fa-caret-right icon-has-ul"></i>'),c=e.children("a"),f=b.children("li").not(e),d=f.children("a"),g=$("#app"),c.on("click",function(a){var b,c;return g.hasClass("nav-min")?!1:(c=$(this),b=c.parent("li"),e.not(b).removeClass("open").find("ul").slideUp(),b.toggleClass("open").find("ul").slideToggle(),a.preventDefault(),void 0)}),d.on("click",function(){return e.removeClass("open").find("ul").slideUp()}),a.$on("minNav:enabled",function(){return e.removeClass("open").find("ul").slideUp()})}}}]).directive("highlightActive",[function(){return{restrict:"A",controller:["$scope","$element","$attrs","$location",function(a,b,c,d){var e,f,g;f=b.find("a"),g=function(){return d.path()},e=function(a,b){b="#"+b,angular.forEach(a,function(a){var c,d,e;d=angular.element(a),c=d.parent("li"),e=d.attr("href"),c.hasClass("active")&&c.removeClass("active"),0===b.indexOf(e)&&c.addClass("active")})},e(f,d.path()),a.$watch(g,function(a,b){a!==b&&e(f,d.path())})}]}}]).directive("toggleOffCanvas",[function(){return{restrict:"A",link:function(a,b){return b.on("click",function(){return $("#app").toggleClass("on-canvas")})}}}]).directive("customBackground",function(){return{restrict:"A",controller:["$scope","$element","$location",function(a,b,c){var d,e;e=function(){return c.path()},d=function(a){switch(b.removeClass("body-home body-special body-tasks body-lock"),a){case"/":return b.addClass("body-home");case"/404":case"/pages/500":case"/pages/signin":case"/pages/signup":case"/pages/forgot":return b.addClass("body-special");case"/pages/lock-screen":return b.addClass("body-special body-lock");case"/tasks":return b.addClass("body-tasks")}},d(c.path()),a.$watch(e,function(a,b){a!==b&&d(c.path())})}]}}).controller("NavCtrl",["$scope",function(){}]),angular.module("app.modules").factory("DB",["$resource",function(a){return{Codes:a("/code/:id/",{id:"@id"},{query:{method:"GET",isArray:!1},list:{method:"GET",params:{list:"1"},isArray:!0},kList:{method:"GET",params:{kList:"1"},isArray:!0}}),Patches:a("/patch/:id/",{id:"@id"},{query:{method:"GET",isArray:!1},list:{method:"GET",params:{list:"1"},isArray:!0},kList:{method:"GET",params:{kList:"1"},isArray:!0}}),VersionControl:a("/version/:id/",{id:"@id"},{query:{method:"GET",isArray:!1},list:{method:"GET",params:{list:"1"},isArray:!0},change:{method:"POST",isArray:!1}}),Sites:a("/site/:id/",{id:"@id"},{query:{method:"GET",isArray:!1},list:{method:"GET",params:{list:"1"},isArray:!0}}),Alerts:a("/alert/:id/",{id:"@id"},{query:{method:"GET",isArray:!1}})}}]),angular.module("app.controllers").controller("CodeCtrl",["$rootScope","$scope","$log","DB","$modal","logger",function(a,b,c,d,e,f){b.ApplyCommandMenu({templateUrl:"views/code/command.html"}),b.CreateCode=function(a){var g=null;if(a){a.preventDefault();var h=$(a.target).closest("tr"),i=this.dataItem(h);g=i.toJSON()}e.open({templateUrl:"views/code/form.html",controller:"CodeFormCtrl",backdrop:!1,resolve:{data:function(){return{item:g,options:{title:(g?"Edit":"Create")+" Code version",action:g?"Edit":"Create"}}}}}).result.then(function(e){c.info(e),d.Codes.save(e,function(d){if(c.info(d),a){var g=_.findIndex(b.gridData,function(a){return a.id==d.id});g>-1&&(b.gridData.splice(g,1),b.gridData.splice(g,0,d)),f.logSuccess("Update code version success!")}else b.gridData.push(d),f.logSuccess("Create code version success!");e.file&&b.UploadFiles(e.file,"/code/"+d.id+"/upload",function(a){c.info(a);var d=_.findIndex(b.gridData,function(b){return b.id==a.id});d>-1&&(b.gridData.splice(d,1),b.gridData.splice(d,0,a)),f.logSuccess("Upload code version success!")},function(a){c.error(a),f.logError("Upload code version failed!")}),b.SafeApply()},function(a){c.error(a),f.logError((a?"Update":"Create")+" code version failed!")})},function(){})},b.RemoveCode=function(a){a.preventDefault();var e=$(a.target).closest("tr"),g=this.dataItem(e);confirm("Are you sure to delete "+g.name)&&d.Codes.delete({id:g.id},function(){var a=_.findIndex(b.gridData,function(a){return a.id==g.id});-1!=a&&b.gridData.splice(a,1),f.logSuccess("Remove code version success!")},function(a){c.error(a),f.logError("Remove code version failed! \n"+a)})},b.DownloadCode=function(a){a.preventDefault();var b=$(a.target).closest("tr"),c=this.dataItem(b),d=document.createElement("a");d.setAttribute("download","code.tgz"),d.setAttribute("href","/code/"+c.id+"/download"),document.body.appendChild(d),d.click(),document.body.removeChild(d)},b.ApplyGridData=function(a,b,c){Array.isArray(b)?(a.splice(0,a.length),b.forEach(function(b){a.push(b)})):b?c?(a.splice(c,1),a.splice(c,0,b)):a.push(b):c&&a.splice(c,1)},b.grid=null,b.gridData=[];var g={columns:[{command:[{name:"_removeCode",text:"",className:"kendo-command-btn btn-danger fa fa-times",click:b.RemoveCode},{name:"_editCode",text:"",className:"kendo-command-btn btn-info fa fa-pencil",click:b.CreateCode},{name:"_downloadCode",text:"",className:"kendo-command-btn btn-success fa fa-download",click:b.DownloadCode}],title:"Act",width:95},{field:"name",title:"Name",width:200},{field:"version",title:"Version",width:150},{field:"hash",title:"MD5",width:250},{field:"desc1",title:"What's new"}],editable:!1,sortable:!0,selectable:"multiple row",pageable:{pageSizes:[20,50,100],buttonCount:3,refresh:!0,messages:{display:"{0} - {1}/{2}",itemsPerPage:"",empty:""}},dataSource:new kendo.data.DataSource({schema:{data:"data",total:"total"},transport:{read:function(a){var b=$("#grid").data("kendoGrid").dataSource,e=b.transport.parameterMap(a.data,"read");for(var g in e)"undefined"==typeof e[g]&&delete e[g];d.Codes.query(e,function(b){a.success(b)},function(b){f.logError("Failed to load grid data!"),c.error(b),a.error()})},parameterMap:function(a,b){var c,d;return a.sort&&a.sort[0]&&(c=a.sort[0].dir,d=a.sort[0].field),"read"==b?{limit:a.take,offset:a.skip,field:d,dir:c}:void 0}},pageSize:20,serverPaging:!0,serverSorting:!0,data:b.gridData}),dataBound:function(){var a=$("#grid").data("kendoGrid");b.gridData=a.dataSource.data()},height:$("#content").height()-2};b.grid=$("#grid").kendoGrid(g),b.$on("window-resize",function(){var a=$("#grid"),b=$("#content").height()-2;400>b&&(b=400),a.innerHeight(b),a.data("kendoGrid")&&a.data("kendoGrid").refresh()})}]).controller("CodeFormCtrl",["$scope","$modalInstance","data",function(a,b,c){a.modalOptions=c.options,a.code={},a.InitVersion=function(b){a.code=b?angular.copy(b):{name:null,version:null,desc1:null,desc2:null,desc3:null,file:null}},a.InitVersion(c.item),a.Create=function(){b.close(a.code)},a.Edit=function(){b.close(a.code)},a.Cancel=function(){b.dismiss("cancel")}}]).controller("CodeCommandCtrl",["$scope",function(a){var b=angular.element("#content").scope();a.CreateCode=b.CreateCode}]),angular.module("app.controllers").controller("PatchCtrl",["$rootScope","$scope","$log","DB","$modal","logger",function(a,b,c,d,e,f){b.ApplyCommandMenu({templateUrl:"views/patch/command.html"}),b.CreatePatch=function(a){var g=null;if(a){a.preventDefault();var h=$(a.target).closest("tr"),i=this.dataItem(h);g=i.toJSON()}e.open({templateUrl:"views/patch/form.html",controller:"PatchFormCtrl",backdrop:!1,resolve:{data:function(){return{item:g,options:{title:(g?"Edit":"Create")+" patch",action:g?"Edit":"Create"}}}}}).result.then(function(e){c.info(e),d.Patches.save(e,function(d){if(c.info(d),a){var g=_.findIndex(b.gridData,function(a){return a.id==d.id});g>-1&&(b.gridData.splice(g,1),b.gridData.splice(g,0,d)),f.logSuccess("Update patch success!")}else b.gridData.push(d),f.logSuccess("Create patch success!");e.file&&b.UploadFiles(e.file,"/patch/"+d.id+"/upload",function(a){c.info(a);var d=_.findIndex(b.gridData,function(b){return b.id==a.id});d>-1&&(b.gridData.splice(d,1),b.gridData.splice(d,0,a)),f.logSuccess("Upload patch success!")},function(a){c.error(a),f.logError("Upload patch failed!")}),b.SafeApply()},function(a){c.error(a),f.logError((a?"Update":"Create")+" patch failed!")})},function(){})},b.RemovePatch=function(a){a.preventDefault();var e=$(a.target).closest("tr"),g=this.dataItem(e);confirm("Are you sure to delete "+g.name)&&d.Patches.delete({id:g.id},function(){var a=_.findIndex(b.gridData,function(a){return a.id==g.id});-1!=a&&b.gridData.splice(a,1),f.logSuccess("Remove patch success!")},function(a){c.error(a),f.logError("Remove patch failed!")})},b.DownloadPatch=function(a){a.preventDefault();var b=$(a.target).closest("tr"),c=this.dataItem(b),d=document.createElement("a");d.setAttribute("download","patch.sh"),d.setAttribute("href","/patch/"+c.id+"/download"),document.body.appendChild(d),d.click(),document.body.removeChild(d)},b.ApplyGridData=function(a,b,c){Array.isArray(b)?(a.splice(0,a.length),b.forEach(function(b){a.push(b)})):b?c?(a.splice(c,1),a.splice(c,0,b)):a.push(b):c&&a.splice(c,1)},b.grid=null,b.gridData=[];var g={columns:[{command:[{name:"_removePatch",text:"",className:"kendo-command-btn btn-danger fa fa-times",click:b.RemovePatch},{name:"_editPatch",text:"",className:"kendo-command-btn btn-info fa fa-pencil",click:b.CreatePatch},{name:"_downloadPatch",text:"",className:"kendo-command-btn btn-success fa fa-download",click:b.DownloadPatch}],title:"Act",width:95},{field:"name",title:"Name",width:200},{field:"version",title:"Version",width:150},{field:"hash",title:"MD5",width:250},{field:"desc1",title:"Description"}],editable:!1,sortable:!0,selectable:"multiple row",pageable:{pageSizes:[20,50,100],buttonCount:3,refresh:!0,messages:{display:"{0} - {1}/{2}",itemsPerPage:"",empty:""}},dataSource:new kendo.data.DataSource({schema:{data:"data",total:"total"},transport:{read:function(a){var b=$("#grid").data("kendoGrid").dataSource,e=b.transport.parameterMap(a.data,"read");for(var g in e)"undefined"==typeof e[g]&&delete e[g];d.Patches.query(e,function(b){a.success(b)},function(b){f.logError("Failed to load grid data!"),c.error(b),a.error()})},parameterMap:function(a,b){var c,d;return a.sort&&a.sort[0]&&(c=a.sort[0].dir,d=a.sort[0].field),"read"==b?{limit:a.take,offset:a.skip,field:d,dir:c}:void 0}},pageSize:20,serverPaging:!0,serverSorting:!0,data:b.gridData}),dataBound:function(){var a=$("#grid").data("kendoGrid");b.gridData=a.dataSource.data()},height:$("#content").height()-2};b.grid=$("#grid").kendoGrid(g),b.$on("window-resize",function(){var a=$("#grid"),b=$("#content").height()-2;400>b&&(b=400),a.innerHeight(b),a.data("kendoGrid")&&a.data("kendoGrid").refresh()})}]).controller("PatchFormCtrl",["$scope","$modalInstance","data",function(a,b,c){a.modalOptions=c.options,a.patch={},a.InitVersion=function(b){a.patch=b?angular.copy(b):{name:null,version:null,desc1:null,desc2:null,desc3:null,file:null}},a.InitVersion(c.item),a.Create=function(){b.close(a.patch)},a.Edit=function(){b.close(a.patch)},a.Cancel=function(){b.dismiss("cancel")}}]).controller("PatchCommandCtrl",["$scope",function(a){var b=angular.element("#content").scope();a.CreatePatch=b.CreatePatch}]),angular.module("app.controllers").controller("VersionControlCtrl",["$rootScope","$scope","$log","logger","DB","$modal",function(a,b,c,d,e,f){b.ApplyCommandMenu({templateUrl:"views/version-control/command.html"}),b.ChangeVersion=function(a){a&&"object"==typeof a&&a.preventDefault(),f.open({templateUrl:"views/version-control/form.html",controller:"VersionControlFormCtrl",backdrop:!1,resolve:{data:function(){return{options:{title:"Manage version",action:"Create"}}}}}).result.then(function(f){if(confirm("Are you sure to change code version?")){var g,h=$("#grid").data("kendoGrid"),i=[];if(0===a)g=angular.copy(b.query),angular.extend(g,f),g.id="change-all",e.VersionControl.change(g,function(){h.dataSource.read()},function(a){c.error(a)});else{if(1===a){var j=h.select();if(j.length<1)return d.logWarning("Please select at least one row!");j.each(function(a,b){i.push(h.dataItem(b).id)})}else{var k=$(a.target).closest("tr");i.push(h.dataItem(k).id)}g={id:"change-selected",ids:i},angular.extend(g,f),e.VersionControl.change(g,function(a){a.data.forEach(function(a){var c=_.findIndex(b.gridData,function(b){return b.id==a.id});c>-1&&(b.gridData.splice(c,1),b.gridData.splice(c,0,a)),b.SafeApply()})},function(a){c.error(a)})}}},function(){})},b.RemoveAlert=function(a){if(a.preventDefault(),confirm("Are you sure to delete event log?")){var b=$(a.delegateTarget).data("kendoGrid"),f=$(a.target).closest("tr"),g=b.dataItem(f);e.Alerts.delete({id:g.id},function(){d.logSuccess("Event log deleted successfully!"),b.dataSource.read()},function(a){c.error(a),d.logError("Delete event log failed!")})}},b.query={level:null,site_id:null,site2_id:null,site3_id:null,site4_id:null,search:null},b.site2=[],b.site3=[],b.site4=[],e.Sites.list({level:2},function(a){b.site2.splice(0,b.site2.length),a.forEach(function(a){b.site2.push(a)})},function(a){c.error(a)}),b.detailGrid=null,b.detailGridData=[];var g=function(a){$("<div/>").appendTo(a.detailCell).kendoGrid({columns:[{command:[{name:"_deleteAlert",text:"",className:"kendo-command-btn btn-danger fa fa-times",click:b.RemoveAlert}],title:"Act",width:44},{field:"created_at",title:"Fired at",width:160,template:"#: ToReadbleDate(created_at) #"},{field:"message",title:"Message",encoded:!1}],editable:!1,sortable:!0,selectable:!1,pageable:{pageSizes:[20,50,100],buttonCount:3,refresh:!0,messages:{display:"{0} - {1}/{2}",itemsPerPage:"",empty:""}},dataSource:new kendo.data.DataSource({schema:{data:"data",total:"total"},transport:{read:{url:"/alert",dataType:"json",cache:!0},parameterMap:function(b,c){var d,e;if(b.sort&&b.sort[0]&&(d=b.sort[0].dir,e=b.sort[0].field),"read"==c){var f={};return f.limit=b.take,f.offset=b.skip,f.field=e,f.dir=d,f.level=0,f.mac=a.data.mac,f}}},pageSize:20,serverPaging:!0,serverSorting:!0,data:b.detailGridData}),dataBound:function(a){b.detailGridData=a.sender.dataSource.data()}})};b.grid=null,b.gridData=[];var h={columns:[{command:[{name:"_editCode",text:"",className:"kendo-command-btn btn-info fa fa-code",click:b.ChangeVersion}],title:"Act",width:45},{field:"name",title:"Name"},{field:"mac",title:"MAC",width:150},{field:"site_id",title:"Site",template:'#: !site ? "" : site.name #',width:180},{field:"code_id",title:"Current version",template:'#: (code && code.name) ? code.name : "" #',width:160},{field:"to_code_id",title:"Update to version",values:[],width:160},{field:"patch_id",title:"Last applied patch",template:'#: (patch && patch.name) ? patch.name : "" #',width:160},{field:"to_patch_id",title:"Apply patch",values:[],width:160}],editable:!1,sortable:!0,selectable:"multiple row",pageable:{pageSizes:[20,50,100],buttonCount:3,refresh:!0,messages:{display:"{0} - {1}/{2}",itemsPerPage:"",empty:""}},dataSource:new kendo.data.DataSource({schema:{data:"data",total:"total"},transport:{read:function(a){var b=$("#grid").data("kendoGrid").dataSource,f=b.transport.parameterMap(a.data,"read");for(var g in f)"undefined"==typeof f[g]&&delete f[g];e.VersionControl.query(f,function(b){for(var c=0;c<b.data.length;c++)b.data[c].selected=0;a.success(b)},function(b){d.logError("Failed to load grid data!"),c.error(b),a.error()})},parameterMap:function(a,c){var d,e;if(a.sort&&a.sort[0]&&(d=a.sort[0].dir,e=a.sort[0].field),"read"==c){var f=angular.copy(b.query);return f.limit=a.take,f.offset=a.skip,f.field=e,f.dir=d,f}}},pageSize:20,serverPaging:!0,serverSorting:!0,data:b.gridData}),dataBound:function(a){b.gridData=a.sender.dataSource.data()},detailInit:g,height:$("#content").height()-$("#filterTop").height()-32};b.codes=[],b.patches=[],async.parallel([function(a){e.Codes.kList({},function(c){b.codes=c,h.columns[5].values=angular.copy(c),a()},function(b){c.error(b),d.logError("Failed to load mapping data!"),a()})},function(a){e.Patches.kList({},function(c){b.patches=c,h.columns[7].values=angular.copy(c),a()},function(b){c.error(b),d.logError("Failed to load mapping data!"),a()})}],function(){b.grid=$("#grid").kendoGrid(h)}),b.$watch("query.site2_id",function(a){b.query.site3_id=null,b.query.site4_id=null,b.query.code_id=null,b.query.site_id=null,b.query.level=3,a&&e.Sites.list(b.query,function(a){b.site3.splice(0,b.site3.length),a.forEach(function(a){b.site3.push(a)}),b.SafeApply()},function(a){c.error(a)});var d=$("#grid").data("kendoGrid");d&&d.dataSource.read()}),b.$watch("query.site3_id",function(a){b.query.site4_id=null,b.query.code_id=null,b.query.site_id=null,b.query.level=4,11==b.query.site2_id&&a?e.Sites.list(b.query,function(a){b.site4.splice(0,b.site4.length),a.forEach(function(a){b.site4.push(a)}),b.SafeApply()},function(a){c.error(a)}):11!=b.query.site2_id&&a&&(b.query.site_id=a);var d=$("#grid").data("kendoGrid");d&&d.dataSource.read()}),b.$watch("query.site4_id",function(a){b.query.code_id=null,b.query.site_id=null,b.query.level=null,a&&(b.query.site_id=a);var c=$("#grid").data("kendoGrid");c&&c.dataSource.read()}),b.$watch("query.search",function(a){if(a&&a.length>=3||!a){var b=$("#grid").data("kendoGrid");b&&b.dataSource.read()}}),b.$on("window-resize",function(){var a=$("#grid"),b=$("#content").height(),c=$("#filterTop").height()+30,d=b-c-2;400>d&&(d+=c),a.innerHeight(d),a.data("kendoGrid")&&a.data("kendoGrid").refresh()})}]).controller("VersionControlFormCtrl",["$scope","$modalInstance","DB","data",function(a,b,c,d){a.modalOptions=d.options,a.version={code_id:null,patch_id:null,update_on:new Date,update_at:"now"},a.codes=[],c.Codes.list({},function(b){a.codes=angular.copy(b)},function(){}),a.patches=[],c.Patches.list({},function(b){a.patches=angular.copy(b)},function(){});var e=new Date;a.hours=[],a.hours.push({text:"Now",value:"now"});for(var f=0;24>f;f++)a.hours.push({text:(10>f?"0"+f:f)+" h",value:f});a.datePickerConfig={minDate:new Date,maxDate:new Date},e.setDate(a.datePickerConfig.minDate.getDate()+5),a.datePickerConfig.maxDate=e,a.Create=function(){b.close(a.version)},a.Cancel=function(){b.dismiss("cancel")}}]).controller("VersionControlCommandCtrl",["$scope",function(a){var b=angular.element("#content").scope();a.ChangeVersion=b.ChangeVersion,a.query=b.query,a.site2=b.site2,a.site3=b.site3,a.site4=b.site4}]),angular.module("app.demo.services",[]).factory("logger",[function(){toastr.options={closeButton:!0,positionClass:"toast-bottom-right",timeOut:"3000"};var a=function(a,b){return toastr[b](a)};return{log:function(b){a(b,"info")},logWarning:function(b){a(b,"warning")},logSuccess:function(b){a(b,"success")},logError:function(b){a(b,"error")}}}]),angular.module("app.demo.directives",[]).directive("uiRangeSlider",[function(){return{restrict:"A",link:function(a,b){b.slider()}}}]).directive("uiFileUpload",[function(){return{restrict:"A",link:function(a,b){b.bootstrapFileInput()}}}]).directive("uiFileUploadNew",[function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(!d)throw new Error("ngModel is required!");d.$render=function(){},b.bootstrapFileInput(),b.bind("change",function(a){console.log(a.target.files),d.$setViewValue(a.target.files)})}}}]).directive("uiSpinner",[function(){return{restrict:"A",compile:function(a){return a.addClass("ui-spinner"),{post:function(){a.spinner()}}}}}]).directive("uiWizardForm",[function(){return{link:function(a,b){b.steps()}}}]),angular.module("app.demo.controllers",[]).controller("NotifyCtrl",["$scope","logger",function(a,b){return a.notify=function(a){switch(a){case"info":return b.log("Heads up! This alert needs your attention, but it's not super important.");case"success":return b.logSuccess("Well done! You successfully read this important alert message.");case"warning":return b.logWarning("Warning! Best check yo self, you're not looking too good.");case"error":return b.logError("Oh snap! Change a few things up and try submitting again.")}}}]).controller("ProgressDemoCtrl",["$scope",function(a){a.max=200,a.random=function(){var b,c;c=Math.floor(100*Math.random()+10),b=void 0,b=25>c?"success":50>c?"info":75>c?"warning":"danger",a.showWarning="danger"===b||"warning"===b,a.dynamic=c,a.type=b},a.random()}]).controller("TabsDemoCtrl",["$scope",function(a){a.tabs=[{title:"Dynamic Title",content:"Dynamic content 1.  Consectetur adipisicing elit. Nihil, quidem, officiis, et ex laudantium sed cupiditate voluptatum libero nobis sit illum voluptates beatae ab. Ad, repellendus non sequi et at."},{title:"Disabled",content:"Dynamic content 2.  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil, quidem, officiis, et ex laudantium sed cupiditate voluptatum libero nobis sit illum voluptates beatae ab. Ad, repellendus non sequi et at.",disabled:!0}],a.navType="pills"}]).controller("AccordionDemoCtrl",["$scope",function(a){a.oneAtATime=!0,a.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"},{title:"Dynamic Group Header - 3",content:"Dynamic Group Body - 3"}],a.items=["Item 1","Item 2","Item 3"],a.addItem=function(){var b;b=a.items.length+1,a.items.push("Item "+b)}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(a,b,c){a.items=c,a.selected={item:a.items[0]},a.ok=function(){b.close(a.selected.item)},a.cancel=function(){b.dismiss("cancel")}}]).controller("ModalDemoCtrl",["$scope","$modal","$log",function(a,b,c){a.items=["item1","item2","item3"],a.open=function(){var d;d=b.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",resolve:{items:function(){return a.items}}}),d.result.then(function(b){a.selected=b},function(){c.info("Modal dismissed at: "+new Date)})}}]).controller("CollapseDemoCtrl",["$scope",function(a){a.isCollapsed=!1}]).controller("PaginationDemoCtrl",["$scope",function(a){a.totalItems=64,a.currentPage=4,a.maxSize=5,a.setPage=function(b){a.currentPage=b},a.bigTotalItems=175,a.bigCurrentPage=1}]).controller("AlertDemoCtrl",["$scope",function(a){a.alerts=[{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"Heads up! This alert needs your attention, but it is not super important."},{type:"warning",msg:"Warning! Best check yo self, you're not looking too good."},{type:"danger",msg:"Oh snap! Change a few things up and try submitting again."}],a.addAlert=function(){var b,c=Math.ceil(4*Math.random());switch(c){case 0:b="info";break;case 1:b="success";break;case 2:b="info";break;case 3:b="warning";break;case 4:b="danger"}a.alerts.push({type:b,msg:"Another alert!"})},a.closeAlert=function(b){a.alerts.splice(b,1)}}]).controller("TreeDemoCtrl",["$scope",function(a){a.list=[{id:1,title:"Item 1",items:[]},{id:2,title:"Item 2",items:[{id:21,title:"Item 2.1",items:[{id:211,title:"Item 2.1.1",items:[]},{id:212,title:"Item 2.1.2",items:[]}]},{id:22,title:"Item 2.2",items:[{id:221,title:"Item 2.2.1",items:[]},{id:222,title:"Item 2.2.2",items:[]}]}]},{id:3,title:"Item 3",items:[]},{id:4,title:"Item 4",items:[{id:41,title:"Item 4.1",items:[]}]},{id:5,title:"Item 5",items:[]},{id:6,title:"Item 6",items:[]},{id:7,title:"Item 7",items:[]}],a.selectedItem={},a.options={},a.remove=function(a){a.remove()},a.toggle=function(a){a.toggle()},a.newSubItem=function(a){var b;b=a.$modelValue,b.items.push({id:10*b.id+b.items.length,title:b.title+"."+(b.items.length+1),items:[]})}}]).controller("TagsDemoCtrl",["$scope",function(a){return a.tags=["foo","bar"]}]).controller("DatepickerDemoCtrl",["$scope",function(a){a.today=function(){return a.dt=new Date},a.today(),a.showWeeks=!0,a.toggleWeeks=function(){return a.showWeeks=!a.showWeeks},a.clear=function(){a.dt=null},a.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},a.toggleMin=function(){var b;return a.minDate=null!=(b=a.minDate)?b:{"null":new Date}},a.toggleMin(),a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={"year-format":"'yy'","starting-day":1},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","shortDate"],a.format=a.formats[0]
}]).controller("TimepickerDemoCtrl",["$scope",function(a){a.mytime=new Date,a.hstep=1,a.mstep=15,a.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},a.ismeridian=!0,a.toggleMode=function(){a.ismeridian=!a.ismeridian},a.update=function(){var b=new Date;b.setHours(14),b.setMinutes(0),a.mytime=b},a.changed=function(){console.log("Time changed to: "+a.mytime)},a.clear=function(){a.mytime=null}}]).controller("TypeaheadCtrl",["$scope",function(a){a.selected=void 0,a.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}]).controller("RatingDemoCtrl",["$scope",function(a){a.rate=7,a.max=10,a.isReadonly=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],a.ratingValue=0}]).controller("formConstraintsCtrl",["$scope",function(a){var b;a.form={required:"",minlength:"",maxlength:"",length_rage:"",type_something:"",confirm_type:"",foo:"",email:"",url:"",num:"",minVal:"",maxVal:"",valRange:"",pattern:""},b=angular.copy(a.form),a.revert=function(){a.form=angular.copy(b),a.form_constraints.$setPristine()},a.canRevert=function(){return!angular.equals(a.form,b)||!a.form_constraints.$pristine},a.canSubmit=function(){return a.form_constraints.$valid&&!angular.equals(a.form,b)}}]).controller("signinCtrl",["$scope",function(a){var b;a.user={email:"",password:""},a.showInfoOnSubmit=!1,b=angular.copy(a.user),a.revert=function(){a.user=angular.copy(b),a.form_signin.$setPristine()},a.canRevert=function(){return!angular.equals(a.user,b)||!a.form_signin.$pristine},a.canSubmit=function(){return a.form_signin.$valid&&!angular.equals(a.user,b)},a.submitForm=function(){a.showInfoOnSubmit=!0,a.revert()}}]).controller("signupCtrl",["$scope",function(a){var b;a.user={name:"",email:"",password:"",confirmPassword:"",age:""},a.showInfoOnSubmit=!1,b=angular.copy(a.user),a.revert=function(){a.user=angular.copy(b),a.form_signup.$setPristine(),a.form_signup.confirmPassword.$setPristine()},a.canRevert=function(){return!angular.equals(a.user,b)||!a.form_signup.$pristine},a.canSubmit=function(){return a.form_signup.$valid&&!angular.equals(a.user,b)},a.submitForm=function(){a.showInfoOnSubmit=!0,a.revert()}}]).controller("invoiceCtrl",["$scope","$window",function(a){a.printInvoice=function(){var a,b,c;c=document.getElementById("invoice").innerHTML,a=document.body.innerHTML,b=window.open(),b.document.open(),b.document.write('<html><head><link rel="stylesheet" type="text/css" href="styles/main.css" /></head><body onload="window.print()">'+c+"</html>"),b.document.close()}}]).controller("tableCtrl",["$scope","$filter",function(a,b){a.stores=[{name:"Nijiya Market",price:"$$",sales:292,rating:4},{name:"Eat On Monday Truck",price:"$",sales:119,rating:4.3},{name:"Tea Era",price:"$",sales:874,rating:4},{name:"Rogers Deli",price:"$",sales:347,rating:4.2},{name:"MoBowl",price:"$$$",sales:24,rating:4.6},{name:"The Milk Pail Market",price:"$",sales:543,rating:4.5},{name:"Nob Hill Foods",price:"$$",sales:874,rating:4},{name:"Scratch",price:"$$$",sales:643,rating:3.6},{name:"Gochi Japanese Fusion Tapas",price:"$$$",sales:56,rating:4.1},{name:"Cost Plus World Market",price:"$$",sales:79,rating:4},{name:"Bumble Bee Health Foods",price:"$$",sales:43,rating:4.3},{name:"Costco",price:"$$",sales:219,rating:3.6},{name:"Red Rock Coffee Co",price:"$",sales:765,rating:4.1},{name:"99 Ranch Market",price:"$",sales:181,rating:3.4},{name:"Mi Pueblo Food Center",price:"$",sales:78,rating:4},{name:"Cucina Venti",price:"$$",sales:163,rating:3.3},{name:"Sufi Coffee Shop",price:"$",sales:113,rating:3.3},{name:"Dana Street Roasting",price:"$",sales:316,rating:4.1},{name:"Pearl Cafe",price:"$",sales:173,rating:3.4},{name:"Posh Bagel",price:"$",sales:140,rating:4},{name:"Artisan Wine Depot",price:"$$",sales:26,rating:4.1},{name:"Hong Kong Chinese Bakery",price:"$",sales:182,rating:3.4},{name:"Starbucks",price:"$$",sales:97,rating:3.7},{name:"Tapioca Express",price:"$",sales:301,rating:3},{name:"House of Bagels",price:"$",sales:82,rating:4.4}],a.searchKeywords="",a.filteredStores=[],a.row="",a.select=function(b){var c,d;d=(b-1)*a.numPerPage,c=d+a.numPerPage,a.currentPageStores=a.filteredStores.slice(d,c)},a.onFilterChange=function(){a.select(1),a.currentPage=1,a.row=""},a.onNumPerPageChange=function(){a.select(1),a.currentPage=1},a.onOrderChange=function(){a.select(1),a.currentPage=1},a.search=function(){a.filteredStores=b("filter")(a.stores,a.searchKeywords),a.onFilterChange()},a.order=function(c){return a.row!==c?(a.row=c,a.filteredStores=b("orderBy")(a.stores,c),a.onOrderChange()):void 0},a.numPerPageOpt=[3,5,10,20],a.numPerPage=a.numPerPageOpt[2],a.currentPage=1,a.currentPageStores=[];var c=function(){a.search(),a.select(a.currentPage)};c()}]);